{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from '@angular/core';\nlet LoginPageComponent = class LoginPageComponent {\n  constructor(auth, formBuilder, router) {\n    this.auth = auth;\n    this.formBuilder = formBuilder;\n    this.router = router;\n    this.lastErrorMessage = \"\";\n    if (auth.hasToken()) router.navigate([\"/\"]);\n    this.mForm = formBuilder.group({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required])\n    });\n  }\n  onSubmit() {\n    if (!this.mForm.valid) {\n      console.log(\"Error!\");\n      console.log(this.mForm);\n    } else {\n      console.log(\"Send!\");\n      this.auth.login(this.mForm.value).subscribe(resut => {\n        this.mForm.reset();\n        this.auth.saveToken(resut.token, resut.expiration);\n        window.location.replace(\"\");\n      }, error => {\n        this.lastErrorMessage = error.error;\n        console.log(error);\n      });\n    }\n  }\n};\nLoginPageComponent = __decorate([Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.css']\n})], LoginPageComponent);\nexport { LoginPageComponent };","map":{"version":3,"mappings":";AAAA,SAASA,SAAS,QAAQ,eAAe;AAOlC,IAAMC,kBAAkB,GAAxB,MAAMA,kBAAkB;EAI7BC,YAAoBC,IAAiB,EAAUC,WAAwB,EAAUC,MAAc;IAA3E,SAAI,GAAJF,IAAI;IAAuB,gBAAW,GAAXC,WAAW;IAAuB,WAAM,GAANC,MAAM;IAFvF,qBAAgB,GAAW,EAAE;IAG3B,IAAGF,IAAI,CAACG,QAAQ,EAAE,EAAED,MAAM,CAACE,QAAQ,CAAC,CAAC,GAAG,CAAC,CAAC;IAC1C,IAAI,CAACC,KAAK,GAAGJ,WAAW,CAACK,KAAK,CAAC;MAC7BC,KAAK,EAAE,IAAIC,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACC,QAAQ,EAAED,UAAU,CAACF,KAAK,CAAC,CAAC;MACnEI,QAAQ,EAAE,IAAIH,WAAW,CAAC,EAAE,EAAE,CAACC,UAAU,CAACC,QAAQ,CAAC;KACpD,CAAC;EAEJ;EAEAE,QAAQ;IACN,IAAI,CAAC,IAAI,CAACP,KAAK,CAACQ,KAAK,EAAE;MACrBC,OAAO,CAACC,GAAG,CAAC,QAAQ,CAAC;MACrBD,OAAO,CAACC,GAAG,CAAC,IAAI,CAACV,KAAK,CAAC;KACxB,MAAM;MACLS,OAAO,CAACC,GAAG,CAAC,OAAO,CAAC;MACpB,IAAI,CAACf,IAAI,CAACgB,KAAK,CAAC,IAAI,CAACX,KAAK,CAACY,KAAK,CAAC,CAC9BC,SAAS,CAACC,KAAK,IAAG;QACjB,IAAI,CAACd,KAAK,CAACe,KAAK,EAAE;QAClB,IAAI,CAACpB,IAAI,CAACqB,SAAS,CAACF,KAAK,CAACG,KAAK,EAAEH,KAAK,CAACI,UAAU,CAAC;QAClDC,MAAM,CAACC,QAAQ,CAACC,OAAO,CAAC,EAAE,CAAC;MAC7B,CAAC,EAAEC,KAAK,IAAG;QACT,IAAI,CAACC,gBAAgB,GAAGD,KAAK,CAACA,KAAK;QACnCb,OAAO,CAACC,GAAG,CAACY,KAAK,CAAC;MACpB,CAAC,CAAC;;EAER;CACD;AA9BY7B,kBAAkB,eAL9BD,SAAS,CAAC;EACTgC,QAAQ,EAAE,gBAAgB;EAC1BC,WAAW,EAAE,6BAA6B;EAC1CC,SAAS,EAAE,CAAC,4BAA4B;CACzC,CAAC,GACWjC,kBAAkB,CA8B9B;SA9BYA,kBAAkB","names":["Component","LoginPageComponent","constructor","auth","formBuilder","router","hasToken","navigate","mForm","group","email","FormControl","Validators","required","password","onSubmit","valid","console","log","login","value","subscribe","resut","reset","saveToken","token","expiration","window","location","replace","error","lastErrorMessage","selector","templateUrl","styleUrls"],"sourceRoot":"","sources":["C:\\Users\\chizh\\source\\repos\\WebBeautyBook\\WebBeautyBook\\ClientApp\\src\\app\\auth\\login-page\\login-page.component.ts"],"sourcesContent":["import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-login-page',\n  templateUrl: './login-page.component.html',\n  styleUrls: ['./login-page.component.css']\n})\nexport class LoginPageComponent {\n  mForm: FormGroup;\n  lastErrorMessage: string = \"\";\n\n  constructor(private auth: AuthService, private formBuilder: FormBuilder, private router: Router) {\n    if(auth.hasToken()) router.navigate([\"/\"]);\n    this.mForm = formBuilder.group({\n      email: new FormControl('', [Validators.required, Validators.email]),\n      password: new FormControl('', [Validators.required])\n    });\n\n  }\n  \n  onSubmit() {\n    if (!this.mForm.valid) {\n      console.log(\"Error!\");\n      console.log(this.mForm);\n    } else {\n      console.log(\"Send!\");\n      this.auth.login(this.mForm.value)\n        .subscribe(resut => {\n          this.mForm.reset();\n          this.auth.saveToken(resut.token, resut.expiration);\n          window.location.replace(\"\");\n        }, error => {\n          this.lastErrorMessage = error.error;\n          console.log(error)\n        });\n    }\n  }\n}\n"]},"metadata":{},"sourceType":"module","externalDependencies":[]}