{"ast":null,"code":"import { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { CategoryFormComponent } from '../category-form/category-form.component';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@angular/common/http\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"@angular/material/dialog\";\nimport * as i4 from \"@angular/common\";\nfunction CategotyPanelComponent_p_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"p\", 3);\n    i0.ɵɵtext(1, \"Categories not found.\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CategotyPanelComponent_div_2_small_7_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const item_r2 = i0.ɵɵnextContext().$implicit;\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"Sub categoty: \", item_r2.categoryId, \"\");\n  }\n}\nfunction CategotyPanelComponent_div_2_small_8_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"small\");\n    i0.ɵɵtext(1, \"Sub categoty: NULL\");\n    i0.ɵɵelementEnd();\n  }\n}\nfunction CategotyPanelComponent_div_2_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r8 = i0.ɵɵgetCurrentView();\n    i0.ɵɵelementStart(0, \"div\", 4)(1, \"div\", 5)(2, \"p\", 6);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"p\", 7);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"p\", 7);\n    i0.ɵɵtemplate(7, CategotyPanelComponent_div_2_small_7_Template, 2, 1, \"small\", 8);\n    i0.ɵɵtemplate(8, CategotyPanelComponent_div_2_small_8_Template, 2, 0, \"small\", 8);\n    i0.ɵɵelementEnd()();\n    i0.ɵɵelementStart(9, \"div\", 9)(10, \"div\", 10)(11, \"img\", 11);\n    i0.ɵɵlistener(\"click\", function CategotyPanelComponent_div_2_Template_img_click_11_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r3 = restoredCtx.index;\n      const ctx_r7 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r7.onDelete(i_r3));\n    });\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(12, \"img\", 12);\n    i0.ɵɵlistener(\"click\", function CategotyPanelComponent_div_2_Template_img_click_12_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r8);\n      const i_r3 = restoredCtx.index;\n      const ctx_r9 = i0.ɵɵnextContext();\n      return i0.ɵɵresetView(ctx_r9.onUpdate(i_r3));\n    });\n    i0.ɵɵelementEnd()()()();\n  }\n  if (rf & 2) {\n    const item_r2 = ctx.$implicit;\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(item_r2.name);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"ID: \", item_r2.id, \"\");\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", item_r2.categoryId != null);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", item_r2.categoryId == null);\n  }\n}\nexport class CategotyPanelComponent {\n  //, private dialog: MatDialog\n  constructor(http, baseUrl, auth, dialog) {\n    this.http = http;\n    this.baseUrl = baseUrl;\n    this.auth = auth;\n    this.dialog = dialog;\n    this.list = [];\n    this.mForm = new FormGroup({\n      name: new FormControl('', [Validators.required, Validators.minLength(2)]),\n      categoryId: new FormControl('', [Validators.minLength(10)])\n    });\n    this.loadCategories();\n  }\n  onDelete(index) {\n    var idCategory = this.list[index];\n    if (idCategory != null && idCategory != undefined) {\n      console.log(\"onDelete(\" + index + \") -> send\");\n      this.http.delete(this.baseUrl + \"api/Category?id=\" + idCategory.id, {\n        headers: this.auth.getHeadersWithToken()\n      }).subscribe(result => {\n        console.log(result);\n        this.list.splice(index, 1);\n      }, error => {\n        console.log(error);\n      });\n    } else {\n      console.log(\"onDelete() -> Not found item: \" + index);\n    }\n  }\n  onUpdate(index) {\n    const dialogRef = this.dialog.open(CategoryFormComponent);\n    dialogRef.afterClosed().subscribe(result => {\n      console.log(result);\n    });\n  }\n  loadCategories() {\n    this.http.get(this.baseUrl + \"api/Category\").subscribe(result => {\n      this.list = result;\n    }, error => {\n      console.log(\"Error -> Home -> loadCategories()\");\n      console.log(error);\n    });\n  }\n}\nCategotyPanelComponent.ɵfac = function CategotyPanelComponent_Factory(t) {\n  return new (t || CategotyPanelComponent)(i0.ɵɵdirectiveInject(i1.HttpClient), i0.ɵɵdirectiveInject('BASE_URL'), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.MatDialog));\n};\nCategotyPanelComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: CategotyPanelComponent,\n  selectors: [[\"app-categoty-panel\"]],\n  decls: 3,\n  vars: 2,\n  consts: [[1, \"container\", \"my-2\", \"bg-light\", \"border\", \"rounded\", \"shadow\"], [\"class\", \"text-center\", 4, \"ngIf\"], [\"class\", \"row d-flex bg-primary rounded m-2\", 4, \"ngFor\", \"ngForOf\"], [1, \"text-center\"], [1, \"row\", \"d-flex\", \"bg-primary\", \"rounded\", \"m-2\"], [1, \"col\"], [1, \"text-lg-center\", \"m-0\", \"h6\", \"text-white\"], [1, \"text-lg-center\", \"m-0\", \"text-white\"], [4, \"ngIf\"], [1, \"col-2\", \"d-flex\", \"justify-content-around\"], [1, \"row\"], [\"src\", \"../../../assets/svg/trash.svg\", 2, \"width\", \"50px\", 3, \"click\"], [\"src\", \"../../../assets/svg/edit.svg\", 2, \"width\", \"50px\", 3, \"click\"]],\n  template: function CategotyPanelComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵtemplate(1, CategotyPanelComponent_p_1_Template, 2, 0, \"p\", 1);\n      i0.ɵɵtemplate(2, CategotyPanelComponent_div_2_Template, 13, 4, \"div\", 2);\n      i0.ɵɵelementEnd();\n    }\n    if (rf & 2) {\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.list == null || ctx.list.length == 0);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngForOf\", ctx.list);\n    }\n  },\n  dependencies: [i4.NgForOf, i4.NgIf],\n  styles: [\"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IiIsInNvdXJjZVJvb3QiOiIifQ== */\"]\n});","map":{"version":3,"names":["FormControl","FormGroup","Validators","CategoryFormComponent","i0","ɵɵelementStart","ɵɵtext","ɵɵelementEnd","ɵɵadvance","ɵɵtextInterpolate1","item_r2","categoryId","ɵɵtemplate","CategotyPanelComponent_div_2_small_7_Template","CategotyPanelComponent_div_2_small_8_Template","ɵɵlistener","CategotyPanelComponent_div_2_Template_img_click_11_listener","restoredCtx","ɵɵrestoreView","_r8","i_r3","index","ctx_r7","ɵɵnextContext","ɵɵresetView","onDelete","CategotyPanelComponent_div_2_Template_img_click_12_listener","ctx_r9","onUpdate","ɵɵtextInterpolate","name","id","ɵɵproperty","CategotyPanelComponent","constructor","http","baseUrl","auth","dialog","list","mForm","required","minLength","loadCategories","idCategory","undefined","console","log","delete","headers","getHeadersWithToken","subscribe","result","splice","error","dialogRef","open","afterClosed","get","ɵɵdirectiveInject","i1","HttpClient","i2","AuthService","i3","MatDialog","selectors","decls","vars","consts","template","CategotyPanelComponent_Template","rf","ctx","CategotyPanelComponent_p_1_Template","CategotyPanelComponent_div_2_Template","length"],"sources":["C:\\Users\\chizh\\source\\repos\\WebBeautyBook\\WebBeautyBook\\ClientApp\\src\\app\\admin\\categoty-panel\\categoty-panel.component.ts","C:\\Users\\chizh\\source\\repos\\WebBeautyBook\\WebBeautyBook\\ClientApp\\src\\app\\admin\\categoty-panel\\categoty-panel.component.html"],"sourcesContent":["import { HttpClient } from '@angular/common/http';\nimport { Component, Inject } from '@angular/core';\nimport { FormControl, FormGroup, Validators } from '@angular/forms';\nimport { Category } from \"../../models/Category\";\nimport { AuthService } from 'src/app/services/auth.service';\nimport {MatDialog, MatDialogModule} from '@angular/material/dialog';\nimport {MatButtonModule} from '@angular/material/button';\nimport { CategoryFormComponent } from '../category-form/category-form.component';\n\n@Component({\n  selector: 'app-categoty-panel',\n  templateUrl: './categoty-panel.component.html',\n  styleUrls: ['./categoty-panel.component.css']\n})\nexport class CategotyPanelComponent {\n\n  public list: Category[] = [];\n  public mForm: FormGroup;\n//, private dialog: MatDialog\n  constructor(private http : HttpClient, @Inject('BASE_URL') private baseUrl: string, private auth: AuthService, private dialog: MatDialog) {\n    this.mForm = new FormGroup({\n      name: new FormControl('', [Validators.required, Validators.minLength(2)]),\n      categoryId: new FormControl('', [Validators.minLength(10)])\n    });\n    this.loadCategories();\n  }\n\n  public onDelete(index: number){\n    var idCategory = this.list[index];\n    if(idCategory != null && idCategory != undefined){\n      console.log(\"onDelete(\" + index + \") -> send\");\n      this.http.delete(this.baseUrl + \"api/Category?id=\" + idCategory.id, {\n        headers: this.auth.getHeadersWithToken()\n      })\n      .subscribe(result => {\n        console.log(result);\n        this.list.splice(index, 1);\n      }, error => {\n          console.log(error);\n      });\n\n    }else{\n      console.log(\"onDelete() -> Not found item: \" + index);\n    }\n  }\n  \n  public onUpdate(index: number){\n    const dialogRef = this.dialog.open(CategoryFormComponent);\n    dialogRef.afterClosed().subscribe(result => {\n      console.log(result);\n      });\n  }\n\n\n  private loadCategories(){\n    this.http.get<Category[]>(this.baseUrl + \"api/Category\")\n    .subscribe(\n      result => {\n          this.list = result;\n      }, error => {\n        console.log(\"Error -> Home -> loadCategories()\")\n        console.log(error);\n      }\n    );\n  }\n\n}\n","<div class=\"container my-2 bg-light border rounded shadow\">\n  <p *ngIf=\"list == null || list.length == 0\" class=\"text-center\">Categories not found.</p>\n  <div *ngFor=\"let item of list let i = index\" class=\"row d-flex bg-primary rounded m-2\">\n    <div class=\"col\">\n        <p class=\"text-lg-center m-0 h6 text-white\">{{item.name}}</p>\n        <p class=\"text-lg-center m-0 text-white\">ID: {{item.id}}</p>\n        <p class=\"text-lg-center m-0 text-white \">\n          <small *ngIf=\"item.categoryId != null\">Sub categoty: {{item.categoryId}}</small>\n          <small *ngIf=\"item.categoryId == null\">Sub categoty: NULL</small>\n        </p>\n    </div>\n    <div class=\"col-2 d-flex justify-content-around\">\n      <div class=\"row\">\n        <img (click)=\"onDelete(i)\" src=\"../../../assets/svg/trash.svg\" style=\"width: 50px;\">\n        <img (click)=\"onUpdate(i)\" src=\"../../../assets/svg/edit.svg\" style=\"width: 50px;\">\n      </div>\n    </div>\n</div>\n</div>"],"mappings":"AAEA,SAASA,WAAW,EAAEC,SAAS,EAAEC,UAAU,QAAQ,gBAAgB;AAKnE,SAASC,qBAAqB,QAAQ,0CAA0C;;;;;;;;ICN9EC,EAAA,CAAAC,cAAA,WAAgE;IAAAD,EAAA,CAAAE,MAAA,4BAAqB;IAAAF,EAAA,CAAAG,YAAA,EAAI;;;;;IAMjFH,EAAA,CAAAC,cAAA,YAAuC;IAAAD,EAAA,CAAAE,MAAA,GAAiC;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;IAAzCH,EAAA,CAAAI,SAAA,GAAiC;IAAjCJ,EAAA,CAAAK,kBAAA,mBAAAC,OAAA,CAAAC,UAAA,KAAiC;;;;;IACxEP,EAAA,CAAAC,cAAA,YAAuC;IAAAD,EAAA,CAAAE,MAAA,yBAAkB;IAAAF,EAAA,CAAAG,YAAA,EAAQ;;;;;;IANzEH,EAAA,CAAAC,cAAA,aAAuF;IAErCD,EAAA,CAAAE,MAAA,GAAa;IAAAF,EAAA,CAAAG,YAAA,EAAI;IAC7DH,EAAA,CAAAC,cAAA,WAAyC;IAAAD,EAAA,CAAAE,MAAA,GAAe;IAAAF,EAAA,CAAAG,YAAA,EAAI;IAC5DH,EAAA,CAAAC,cAAA,WAA0C;IACxCD,EAAA,CAAAQ,UAAA,IAAAC,6CAAA,mBAAgF;IAChFT,EAAA,CAAAQ,UAAA,IAAAE,6CAAA,mBAAiE;IACnEV,EAAA,CAAAG,YAAA,EAAI;IAERH,EAAA,CAAAC,cAAA,aAAiD;IAExCD,EAAA,CAAAW,UAAA,mBAAAC,4DAAA;MAAA,MAAAC,WAAA,GAAAb,EAAA,CAAAc,aAAA,CAAAC,GAAA;MAAA,MAAAC,IAAA,GAAAH,WAAA,CAAAI,KAAA;MAAA,MAAAC,MAAA,GAAAlB,EAAA,CAAAmB,aAAA;MAAA,OAASnB,EAAA,CAAAoB,WAAA,CAAAF,MAAA,CAAAG,QAAA,CAAAL,IAAA,CAAW;IAAA,EAAC;IAA1BhB,EAAA,CAAAG,YAAA,EAAoF;IACpFH,EAAA,CAAAC,cAAA,eAAmF;IAA9ED,EAAA,CAAAW,UAAA,mBAAAW,4DAAA;MAAA,MAAAT,WAAA,GAAAb,EAAA,CAAAc,aAAA,CAAAC,GAAA;MAAA,MAAAC,IAAA,GAAAH,WAAA,CAAAI,KAAA;MAAA,MAAAM,MAAA,GAAAvB,EAAA,CAAAmB,aAAA;MAAA,OAASnB,EAAA,CAAAoB,WAAA,CAAAG,MAAA,CAAAC,QAAA,CAAAR,IAAA,CAAW;IAAA,EAAC;IAA1BhB,EAAA,CAAAG,YAAA,EAAmF;;;;IAVvCH,EAAA,CAAAI,SAAA,GAAa;IAAbJ,EAAA,CAAAyB,iBAAA,CAAAnB,OAAA,CAAAoB,IAAA,CAAa;IAChB1B,EAAA,CAAAI,SAAA,GAAe;IAAfJ,EAAA,CAAAK,kBAAA,SAAAC,OAAA,CAAAqB,EAAA,KAAe;IAE9C3B,EAAA,CAAAI,SAAA,GAA6B;IAA7BJ,EAAA,CAAA4B,UAAA,SAAAtB,OAAA,CAAAC,UAAA,SAA6B;IAC7BP,EAAA,CAAAI,SAAA,GAA6B;IAA7BJ,EAAA,CAAA4B,UAAA,SAAAtB,OAAA,CAAAC,UAAA,SAA6B;;;ADM/C,OAAM,MAAOsB,sBAAsB;EAInC;EACEC,YAAoBC,IAAiB,EAA8BC,OAAe,EAAUC,IAAiB,EAAUC,MAAiB;IAApH,KAAAH,IAAI,GAAJA,IAAI;IAA2C,KAAAC,OAAO,GAAPA,OAAO;IAAkB,KAAAC,IAAI,GAAJA,IAAI;IAAuB,KAAAC,MAAM,GAANA,MAAM;IAHtH,KAAAC,IAAI,GAAe,EAAE;IAI1B,IAAI,CAACC,KAAK,GAAG,IAAIvC,SAAS,CAAC;MACzB6B,IAAI,EAAE,IAAI9B,WAAW,CAAC,EAAE,EAAE,CAACE,UAAU,CAACuC,QAAQ,EAAEvC,UAAU,CAACwC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC;MACzE/B,UAAU,EAAE,IAAIX,WAAW,CAAC,EAAE,EAAE,CAACE,UAAU,CAACwC,SAAS,CAAC,EAAE,CAAC,CAAC;KAC3D,CAAC;IACF,IAAI,CAACC,cAAc,EAAE;EACvB;EAEOlB,QAAQA,CAACJ,KAAa;IAC3B,IAAIuB,UAAU,GAAG,IAAI,CAACL,IAAI,CAAClB,KAAK,CAAC;IACjC,IAAGuB,UAAU,IAAI,IAAI,IAAIA,UAAU,IAAIC,SAAS,EAAC;MAC/CC,OAAO,CAACC,GAAG,CAAC,WAAW,GAAG1B,KAAK,GAAG,WAAW,CAAC;MAC9C,IAAI,CAACc,IAAI,CAACa,MAAM,CAAC,IAAI,CAACZ,OAAO,GAAG,kBAAkB,GAAGQ,UAAU,CAACb,EAAE,EAAE;QAClEkB,OAAO,EAAE,IAAI,CAACZ,IAAI,CAACa,mBAAmB;OACvC,CAAC,CACDC,SAAS,CAACC,MAAM,IAAG;QAClBN,OAAO,CAACC,GAAG,CAACK,MAAM,CAAC;QACnB,IAAI,CAACb,IAAI,CAACc,MAAM,CAAChC,KAAK,EAAE,CAAC,CAAC;MAC5B,CAAC,EAAEiC,KAAK,IAAG;QACPR,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;MACtB,CAAC,CAAC;KAEH,MAAI;MACHR,OAAO,CAACC,GAAG,CAAC,gCAAgC,GAAG1B,KAAK,CAAC;;EAEzD;EAEOO,QAAQA,CAACP,KAAa;IAC3B,MAAMkC,SAAS,GAAG,IAAI,CAACjB,MAAM,CAACkB,IAAI,CAACrD,qBAAqB,CAAC;IACzDoD,SAAS,CAACE,WAAW,EAAE,CAACN,SAAS,CAACC,MAAM,IAAG;MACzCN,OAAO,CAACC,GAAG,CAACK,MAAM,CAAC;IACnB,CAAC,CAAC;EACN;EAGQT,cAAcA,CAAA;IACpB,IAAI,CAACR,IAAI,CAACuB,GAAG,CAAa,IAAI,CAACtB,OAAO,GAAG,cAAc,CAAC,CACvDe,SAAS,CACRC,MAAM,IAAG;MACL,IAAI,CAACb,IAAI,GAAGa,MAAM;IACtB,CAAC,EAAEE,KAAK,IAAG;MACTR,OAAO,CAACC,GAAG,CAAC,mCAAmC,CAAC;MAChDD,OAAO,CAACC,GAAG,CAACO,KAAK,CAAC;IACpB,CAAC,CACF;EACH;;AAlDWrB,sBAAsB,C;mBAAtBA,sBAAsB,EAAA7B,EAAA,CAAAuD,iBAAA,CAAAC,EAAA,CAAAC,UAAA,GAAAzD,EAAA,CAAAuD,iBAAA,CAKc,UAAU,GAAAvD,EAAA,CAAAuD,iBAAA,CAAAG,EAAA,CAAAC,WAAA,GAAA3D,EAAA,CAAAuD,iBAAA,CAAAK,EAAA,CAAAC,SAAA;AAAA;AAL9ChC,sBAAsB,C;QAAtBA,sBAAsB;EAAAiC,SAAA;EAAAC,KAAA;EAAAC,IAAA;EAAAC,MAAA;EAAAC,QAAA,WAAAC,gCAAAC,EAAA,EAAAC,GAAA;IAAA,IAAAD,EAAA;MCdnCpE,EAAA,CAAAC,cAAA,aAA2D;MACzDD,EAAA,CAAAQ,UAAA,IAAA8D,mCAAA,eAAyF;MACzFtE,EAAA,CAAAQ,UAAA,IAAA+D,qCAAA,kBAeI;MACNvE,EAAA,CAAAG,YAAA,EAAM;;;MAjBAH,EAAA,CAAAI,SAAA,GAAsC;MAAtCJ,EAAA,CAAA4B,UAAA,SAAAyC,GAAA,CAAAlC,IAAA,YAAAkC,GAAA,CAAAlC,IAAA,CAAAqC,MAAA,MAAsC;MACpBxE,EAAA,CAAAI,SAAA,GAAQ;MAARJ,EAAA,CAAA4B,UAAA,YAAAyC,GAAA,CAAAlC,IAAA,CAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}